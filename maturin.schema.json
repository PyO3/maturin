{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ToolMaturin",
  "description": "The `[tool.maturin]` section of a pyproject.toml",
  "type": "object",
  "properties": {
    "all-features": {
      "description": "Activate all available features",
      "type": [
        "boolean",
        "null"
      ]
    },
    "auditwheel": {
      "description": "Audit wheel mode",
      "anyOf": [
        {
          "$ref": "#/$defs/AuditWheelMode"
        },
        {
          "type": "null"
        }
      ]
    },
    "bindings": {
      "description": "Bindings type",
      "type": [
        "string",
        "null"
      ]
    },
    "compatibility": {
      "description": "Platform compatibility",
      "anyOf": [
        {
          "$ref": "#/$defs/PlatformTag"
        },
        {
          "type": "null"
        }
      ]
    },
    "config": {
      "description": "Override a configuration value (unstable)",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      }
    },
    "data": {
      "description": "Path to the wheel directory, defaults to `<module_name>.data`",
      "type": [
        "string",
        "null"
      ]
    },
    "editable-profile": {
      "description": "Same as `profile` but for \"editable\" builds",
      "type": [
        "string",
        "null"
      ]
    },
    "exclude": {
      "description": "Exclude files matching the given glob pattern(s)",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/$defs/GlobPattern"
      }
    },
    "features": {
      "description": "Space or comma separated list of features to activate",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      }
    },
    "frozen": {
      "description": "Require Cargo.lock and cache are up to date",
      "type": [
        "boolean",
        "null"
      ]
    },
    "include": {
      "description": "Include files matching the given glob pattern(s)",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/$defs/GlobPattern"
      }
    },
    "locked": {
      "description": "Require Cargo.lock is up to date",
      "type": [
        "boolean",
        "null"
      ]
    },
    "manifest-path": {
      "description": "Path to Cargo.toml",
      "type": [
        "string",
        "null"
      ]
    },
    "module-name": {
      "description": "Module name, accepts setuptools style import name like `foo.bar`",
      "type": [
        "string",
        "null"
      ]
    },
    "no-default-features": {
      "description": "Do not activate the `default` feature",
      "type": [
        "boolean",
        "null"
      ]
    },
    "profile": {
      "description": "Build artifacts with the specified Cargo profile",
      "type": [
        "string",
        "null"
      ]
    },
    "python-packages": {
      "description": "Python packages to include",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      }
    },
    "python-source": {
      "description": "The directory with python module, contains `<module_name>/__init__.py`",
      "type": [
        "string",
        "null"
      ]
    },
    "rustc-args": {
      "description": "Additional rustc arguments",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      }
    },
    "sdist-generator": {
      "description": "Source distribution generator",
      "$ref": "#/$defs/SdistGenerator",
      "default": "cargo"
    },
    "skip-auditwheel": {
      "description": "Skip audit wheel",
      "type": "boolean",
      "default": false
    },
    "strip": {
      "description": "Strip the final binary",
      "type": "boolean",
      "default": false
    },
    "target": {
      "description": "Target configuration",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/TargetConfig"
      },
      "default": {}
    },
    "targets": {
      "description": "Cargo compile targets",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/$defs/CargoTarget"
      }
    },
    "unstable-flags": {
      "description": "Unstable (nightly-only) flags to Cargo, see 'cargo -Z help' for details",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "type": "string"
      }
    },
    "use-base-python": {
      "description": "Use base Python executable instead of venv Python executable in PEP 517 build.",
      "type": "boolean",
      "default": false
    }
  },
  "$defs": {
    "AuditWheelMode": {
      "description": "Auditwheel mode",
      "oneOf": [
        {
          "description": "Audit and repair wheel for manylinux compliance",
          "type": "string",
          "const": "repair"
        },
        {
          "description": "Check wheel for manylinux compliance, but do not repair",
          "type": "string",
          "const": "check"
        },
        {
          "description": "Don't check for manylinux compliance",
          "type": "string",
          "const": "skip"
        }
      ]
    },
    "CargoCrateType": {
      "description": "Supported cargo crate types",
      "oneOf": [
        {
          "description": "Binary executable target",
          "type": "string",
          "const": "bin"
        },
        {
          "description": "Dynamic system library target",
          "type": "string",
          "const": "cdylib"
        },
        {
          "description": "Dynamic Rust library target",
          "type": "string",
          "const": "dylib"
        },
        {
          "description": "Rust library",
          "type": "string",
          "const": "lib"
        },
        {
          "description": "Rust library for use as an intermediate target",
          "type": "string",
          "const": "rlib"
        },
        {
          "description": "Static library",
          "type": "string",
          "const": "staticlib"
        }
      ]
    },
    "CargoTarget": {
      "description": "Cargo compile target",
      "type": "object",
      "properties": {
        "kind": {
          "description": "Kind of target (\"bin\", \"cdylib\")",
          "anyOf": [
            {
              "$ref": "#/$defs/CargoCrateType"
            },
            {
              "type": "null"
            }
          ]
        },
        "name": {
          "description": "Name as given in the `Cargo.toml` or generated from the file name",
          "type": "string"
        }
      },
      "required": [
        "name"
      ]
    },
    "Format": {
      "description": "The target format for the include or exclude [GlobPattern].\n\nSee [Formats].",
      "oneOf": [
        {
          "description": "Source distribution",
          "type": "string",
          "const": "sdist"
        },
        {
          "description": "Wheel",
          "type": "string",
          "const": "wheel"
        }
      ]
    },
    "Formats": {
      "description": "A single [Format] or multiple [Format] values for a [GlobPattern].",
      "anyOf": [
        {
          "description": "A single [Format] value",
          "$ref": "#/$defs/Format"
        },
        {
          "description": "Multiple [Format] values",
          "type": "array",
          "items": {
            "$ref": "#/$defs/Format"
          }
        }
      ]
    },
    "GlobPattern": {
      "description": "A glob pattern for the include and exclude configuration.\n\nSee [PyProjectToml::include] and [PyProject::exclude].\n\nBased on <https://python-poetry.org/docs/pyproject/#include-and-exclude>.",
      "anyOf": [
        {
          "description": "A glob",
          "type": "string"
        },
        {
          "description": "A glob `path` with a `format` key to specify one or more [Format] values",
          "type": "object",
          "properties": {
            "format": {
              "description": "One or more [Format] values",
              "$ref": "#/$defs/Formats"
            },
            "path": {
              "description": "A glob",
              "type": "string"
            }
          },
          "required": [
            "path",
            "format"
          ]
        }
      ]
    },
    "PlatformTag": {
      "description": "Decides how to handle manylinux and musllinux compliance",
      "oneOf": [
        {
          "description": "Use the `manylinux_<major>_<minor>` tag",
          "type": "object",
          "properties": {
            "Manylinux": {
              "type": "object",
              "properties": {
                "major": {
                  "description": "GLIBC version major",
                  "type": "integer",
                  "format": "uint16",
                  "maximum": 65535,
                  "minimum": 0
                },
                "minor": {
                  "description": "GLIBC version minor",
                  "type": "integer",
                  "format": "uint16",
                  "maximum": 65535,
                  "minimum": 0
                }
              },
              "required": [
                "major",
                "minor"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "Manylinux"
          ]
        },
        {
          "description": "Use the `musllinux_<major>_<minor>` tag",
          "type": "object",
          "properties": {
            "Musllinux": {
              "type": "object",
              "properties": {
                "major": {
                  "description": "musl libc version major",
                  "type": "integer",
                  "format": "uint16",
                  "maximum": 65535,
                  "minimum": 0
                },
                "minor": {
                  "description": "musl libc version minor",
                  "type": "integer",
                  "format": "uint16",
                  "maximum": 65535,
                  "minimum": 0
                }
              },
              "required": [
                "major",
                "minor"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "Musllinux"
          ]
        },
        {
          "description": "Use the native linux tag",
          "type": "string",
          "const": "Linux"
        },
        {
          "description": "Ensure that a PyPI-compatible tag is used, error if the target is not supported by PyPI.",
          "type": "string",
          "const": "Pypi"
        }
      ]
    },
    "SdistGenerator": {
      "description": "Source distribution generator",
      "oneOf": [
        {
          "description": "Use `cargo package --list`",
          "type": "string",
          "const": "cargo"
        },
        {
          "description": "Use `git ls-files`",
          "type": "string",
          "const": "git"
        }
      ]
    },
    "TargetConfig": {
      "description": "Target configuration",
      "type": "object",
      "properties": {
        "macos-deployment-target": {
          "description": "macOS deployment target version",
          "type": [
            "string",
            "null"
          ]
        }
      }
    }
  }
}
